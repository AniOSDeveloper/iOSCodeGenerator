import UIKit
import BXModel
{% if not model.ui_is_lib %}
import Bond
import CocoaLumberjack
import SwiftyJSON
import PromiseKit
import BXiOSUtils
import Kingfisher
import BXForm
{% endif %}

{% for comment in comments %}
{{ comment }}
{% endfor %}

{% set m = model %}
{% set mname = model.vc_mname %}
class {{ model.class_name }} : {{model.superclass}} {{  '' if model.ui_no_bind else ' ,BXBindable' }} {
    {% for field in uifields %}
    {{ field.declare_stmt }}
    {% endfor %}
    {{ model.adapter_decl }}

    {% if 'TableViewCell' in model.superclass %}
    convenience init() {
        self.init(style: .Default, reuseIdentifier: "{{ model.class_name }}Cell")
    }
    override init(style: UITableViewCellStyle, reuseIdentifier: String?) {
        super.init(style: style, reuseIdentifier: reuseIdentifier)
        commonInit()
    }
    {% else %}
    override init(frame: CGRect) {
        super.init(frame: frame)
        commonInit()
    }
    {% endif %}

    {% if model.ui_has_bind %}
    var item:{{mname}}?
    func bind(item:{{model.vc_mname}}){
        self.item = item
    {% for field in uifields %}
        {% if field.can_bind_value %}
        {{field.bind_value_stmt}}
        {% endif %}
    {% endfor %}
    }
    {% endif %}

    override func awakeFromNib() {
        super.awakeFromNib()
        commonInit()
    }

    {%  include 'uicommon_init.html' %}

}

